\section{Shock wave simulation}
We studied the evolution of trans-relativistic shocks and spectum of accelerated particles. We chose relastivistic shocks with low lorenz-factor because the maximum energy of produced cosmic rays increases with shock wave lorenz-factor, but the efficiency of acceleration decreases, because it is more difficult for particle to cross fast moving front many times \cite{Ellison2013}. So we assume that intermediate case of trans-relativistic shocks provides the most effective acceleration.

We developed the implicit particle-in-cell (PIC) code, based on the scheme suggested by Lapenta et al.~\cite{Lapenta2006} and improved for the relativistic case by Noguchi et al.\cite{Noguchi2007}.
Our code is fully three dimensional and parallelized with MPI technology, which is adapted for distributed computing and can be executed on a wide class of computers.

In simulation setup the homogeneous plasma, which flows in through the right boundary
and collides with the reflecting superconducting wall on the left boundary. 
  
 Simulations are one-dimensional and have following parameters: initial flow lorenz-factor $\gamma = 1.5$, number densities $n_e = 10^{-4} \rm{cm}^{-3}$, $n_p = 10^{-4} \rm{cm}^{-3}$ , temperature $5\cdot10^8 \rm{K}$, magnetic field $B = 10^{-4} \rm{G}$, the full size of the box $L = 4\cdot10^{12} \rm{cm}$, the number of cells $N=4\cdot10^4$. Electron mass is reduced to $m_e = \frac{m_p}{20}$. The full time of simulation is $T = 5000 {\omega_p}^{-1}$. All values are measured in downstream frame. $\theta$ is angle between flow velocity and magnetic field. We present results of particle spectrum in several simulations with different $\theta$. 
\begin{figure}[h!]
	\centering
	\includegraphics[width=0.8\textwidth]{fig/protons.eps} 
	\caption{Distribution of protons.}
	\label{protons}
\end{figure}
\begin{figure}[h!]
	\centering
	\includegraphics[width=0.8\textwidth]{fig/electrons.eps} 
	\caption{Distribution of electrons.}
	\label{electrons}
\end{figure}

One can see that spectrum strongly depends of angle $\theta$. If $\theta$ is less then critical value, defined as $c\cdot cos(\theta_{crit})=v_{shock}$, measured in shock rest frame, shock is subluminal and particles can escape from front and than cross it enough of times to e accelerated.